"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3736],{9389:function(e,t,i){var a=i(94389),o=i(44614),l=i(67469);t.ZP={getVideoQualityOptions:function(e){var t,i=e.currentMaxBitrate,n=e.videoWidth,c=e.videoHeight;n/c<16/9&&(n=c*(16/9));var r=null==e.maxVideoWidth?l.Z.maxVideoWidth():e.maxVideoWidth,s=(r<0?null===(t=a.M.screen())||void 0===t?void 0:t.maxAllowedWidth:r)||4096,u=n||4096,d=[],b={name:o.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&d.push(b),u>=3800&&s>=1930&&(d.push({name:"4K - 120 Mbps",maxHeight:2160,bitrate:12e7}),d.push({name:"4K - 80 Mbps",maxHeight:2160,bitrate:8e7})),u>=1900&&s>=1290&&(d.push({name:"1080p - 60 Mbps",maxHeight:1080,bitrate:6e7}),d.push({name:"1080p - 40 Mbps",maxHeight:1080,bitrate:4e7}),d.push({name:"1080p - 20 Mbps",maxHeight:1080,bitrate:2e7}),d.push({name:"1080p - 15 Mbps",maxHeight:1080,bitrate:15e6}),d.push({name:"1080p - 10 Mbps",maxHeight:1080,bitrate:1e7})),u>=1260&&s>=650&&(d.push({name:"720p - 8 Mbps",maxHeight:720,bitrate:8e6}),d.push({name:"720p - 6 Mbps",maxHeight:720,bitrate:6e6}),d.push({name:"720p - 4 Mbps",maxHeight:720,bitrate:4e6})),u>=620&&(d.push({name:"480p - 3 Mbps",maxHeight:480,bitrate:3e6}),d.push({name:"480p - 1.5 Mbps",maxHeight:480,bitrate:15e5}),d.push({name:"480p - 720 kbps",maxHeight:480,bitrate:72e4})),d.push({name:"360p - 420 kbps",maxHeight:360,bitrate:42e4}),i){for(var h=d.length-1,p=0,m=d.length;p<m;p++){var y=d[p];if(y.bitrate>0&&y.bitrate<=i){h=p;break}}var v=d[h];e.isAutomaticBitrateEnabled?b.autoText=v.name:v.selected=!0}return d},getAudioQualityOptions:function(e){var t=e.currentMaxBitrate,i=[],a={name:o.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&i.push(a),i.push({name:"2 Mbps",bitrate:2e6}),i.push({name:"1.5 Mbps",bitrate:15e5}),i.push({name:"1 Mbps",bitrate:1e6}),i.push({name:"320 kbps",bitrate:32e4}),i.push({name:"256 kbps",bitrate:256e3}),i.push({name:"192 kbps",bitrate:192e3}),i.push({name:"128 kbps",bitrate:128e3}),i.push({name:"96 kbps",bitrate:96e3}),i.push({name:"64 kbps",bitrate:64e3}),t){for(var l=i.length-1,n=0,c=i.length;n<c;n++){var r=i[n];if(r.bitrate>0&&r.bitrate<=t){l=n;break}}var s=i[l];e.isAutomaticBitrateEnabled?a.autoText=s.name:s.selected=!0}return i}}},25466:function(e,t,i){i.r(t),i.d(t,{default:function(){return V}}),i(61013),i(23938),i(32081),i(99785);var a=i(67469),o=i(94389),l=i(27515),n=i(9389),c=i(44614),r=i(56705),s=i(47005),u=(i(20716),i(45368),i(53913)),d=i(25152);function b(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e){e.innerHTML=[5,10,15,20,25,30].map((function(e){return{name:c.ZP.translate("ValueSeconds",e),value:1e3*e}})).map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join("")}function p(e,t,i,o){var l="Audio"===i?n.ZP.getAudioQualityOptions({currentMaxBitrate:a.Z.maxStreamingBitrate(t,i),isAutomaticBitrateEnabled:a.Z.enableAutomaticBitrateDetection(t,i),enableAuto:!0}):n.ZP.getVideoQualityOptions({currentMaxBitrate:a.Z.maxStreamingBitrate(t,i),isAutomaticBitrateEnabled:a.Z.enableAutomaticBitrateDetection(t,i),enableAuto:!0,maxVideoWidth:o});e.innerHTML=l.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join("")}function m(e,t,i){p(e,t,i),a.Z.enableAutomaticBitrateDetection(t,i)?e.value="":e.value=a.Z.maxStreamingBitrate(t,i)}function y(e,t){var i=n.ZP.getVideoQualityOptions({currentMaxBitrate:a.Z.maxChromecastBitrate(),isAutomaticBitrateEnabled:!a.Z.maxChromecastBitrate(),enableAuto:!0,maxVideoWidth:t});e.innerHTML=i.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join(""),e.value=a.Z.maxChromecastBitrate()||""}function v(e,t,i){e.value?(a.Z.maxStreamingBitrate(t,i,e.value),a.Z.enableAutomaticBitrateDetection(t,i,!1)):a.Z.enableAutomaticBitrateDetection(t,i,!0)}function S(e,t,i){e.value=t,e.selectedIndex<0&&(e.value=i)}function k(e){var t=this.options.element,i=t.querySelector(".selectVideoInNetworkQuality"),a=t.querySelector(".selectVideoInternetQuality"),o=t.querySelector(".selectChromecastVideoQuality"),l=i.value,n=a.value,c=o.value,r=parseInt(e.target.value||"0",10)||0;p(i,!0,"Video",r),p(a,!1,"Video",r),y(o,r),S(i,l,""),S(a,n,""),S(o,c,"")}function f(e){var t=this,i=u.Z.getApiClient(t.options.serverId),o=t.options.userId,l=t.options.userSettings;return l.setUserInfo(o,i).then((function(){var e=t.options.enableSaveConfirmation;!function(e,t,i,o,l,n){r.ZP.show(),l.getUser(i).then((function(i){(function(e,t,i,o){return a.Z.enableSystemExternalPlayers(e.querySelector(".chkExternalVideoPlayer").checked),a.Z.maxChromecastBitrate(e.querySelector(".selectChromecastVideoQuality").value),a.Z.maxVideoWidth(e.querySelector(".selectLabelMaxVideoWidth").value),v(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),v(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),v(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),i.allowedAudioChannels(e.querySelector("#selectAllowedAudioChannels").value),t.Configuration.AudioLanguagePreference=e.querySelector("#selectAudioLanguage").value,t.Configuration.PlayDefaultAudioTrack=e.querySelector(".chkPlayDefaultAudioTrack").checked,t.Configuration.EnableNextEpisodeAutoPlay=e.querySelector(".chkEpisodeAutoPlay").checked,i.preferFmp4HlsContainer(e.querySelector(".chkPreferFmp4HlsContainer").checked),i.enableCinemaMode(e.querySelector(".chkEnableCinemaMode").checked),i.enableNextVideoInfoOverlay(e.querySelector(".chkEnableNextVideoOverlay").checked),t.Configuration.RememberAudioSelections=e.querySelector(".chkRememberAudioSelections").checked,t.Configuration.RememberSubtitleSelections=e.querySelector(".chkRememberSubtitleSelections").checked,i.chromecastVersion(e.querySelector(".selectChromecastVersion").value),i.skipForwardLength(e.querySelector(".selectSkipForwardLength").value),i.skipBackLength(e.querySelector(".selectSkipBackLength").value),o.updateUserConfiguration(t.Id,t.Configuration)})(t,i,o,l).then((function(){r.ZP.hide(),n&&(0,d.Z)(c.ZP.translate("SettingsSaved")),s.Events.trigger(e,"saved")}),(function(){r.ZP.hide()}))}))}(t,t.options.element,o,l,i,e)})),e&&e.preventDefault(),!1}function x(e,t){e.element.innerHTML=c.ZP.translateHtml('<form style="margin:0 auto"> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${HeaderAudioSettings} </h2> <div class="selectContainer"> <select is="emby-select" id="selectAllowedAudioChannels" label="${LabelAllowedAudioChannels}"> <option value="-1">${Auto}</option> <option value="1">${LabelSelectMono}</option> <option value="2">${LabelSelectStereo}</option> <option value="6">5.1 ${LabelSelectAudioChannels}</option> <option value="8">7.1 ${LabelSelectAudioChannels}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectAudioLanguage" label="${LabelAudioLanguagePreference}"></select> </div> <label class="checkboxContainer"> <input type="checkbox" is="emby-checkbox" class="chkPlayDefaultAudioTrack"/> <span>${LabelPlayDefaultAudioTrack}</span> </label> </div> <div class="qualitySections hide"> <div class="verticalSection verticalSection-extrabottompadding videoQualitySection hide"> <h2 class="sectionTitle"> ${HeaderVideoQuality} </h2> <div class="selectContainer fldVideoInNetworkQuality hide"> <select is="emby-select" class="selectVideoInNetworkQuality" label="${LabelHomeNetworkQuality}"></select> </div> <div class="selectContainer fldVideoInternetQuality hide"> <select is="emby-select" class="selectVideoInternetQuality" label="${LabelInternetQuality}"></select> </div> <div class="selectContainer fldChromecastQuality hide"> <select is="emby-select" class="selectChromecastVideoQuality" label="${LabelMaxChromecastBitrate}"></select> </div> <div class="selectContainer"> <select is="emby-select" class="selectLabelMaxVideoWidth" label="${LabelMaxVideoResolution}"> <option value="0">${Auto}</option> <option value="-1">${ScreenResolution}</option> <option value="640">360p</option> <option value="852">480p</option> <option value="1280">720p</option> <option value="1920">1080p</option> <option value="3840">4K</option> <option value="7680">8K</option> </select> </div> </div> <div class="verticalSection verticalSection-extrabottompadding musicQualitySection hide"> <h2> ${HeaderMusicQuality} </h2> <div class="selectContainer"> <select is="emby-select" class="selectMusicInternetQuality" label="${LabelInternetQuality}"></select> </div> </div> </div> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${TabAdvanced} </h2> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkPreferFmp4HlsContainer"/> <span>${PreferFmp4HlsContainer}</span> </label> <div class="fieldDescription checkboxFieldDescription">${PreferFmp4HlsContainerHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription cinemaModeOptions"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableCinemaMode"/> <span>${EnableCinemaMode}</span> </label> <div class="fieldDescription checkboxFieldDescription">${CinemaModeConfigurationHelp}</div> </div> <div class="checkboxContainer fldEpisodeAutoPlay"> <label> <input type="checkbox" is="emby-checkbox" class="chkEpisodeAutoPlay"/> <span>${PlayNextEpisodeAutomatically}</span> </label> </div> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkRememberAudioSelections"/> <span>${RememberAudioSelections}</span> </label> <div class="fieldDescription checkboxFieldDescription">${RememberAudioSelectionsHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkRememberSubtitleSelections"/> <span>${RememberSubtitleSelections}</span> </label> <div class="fieldDescription checkboxFieldDescription">${RememberSubtitleSelectionsHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription fldEnableNextVideoOverlay"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableNextVideoOverlay"/> <span>${EnableNextVideoInfoOverlay}</span> </label> <div class="fieldDescription checkboxFieldDescription">${EnableNextVideoInfoOverlayHelp}</div> </div> <div class="checkboxContainer fldExternalPlayer checkboxContainer-withDescription hide"> <label> <input type="checkbox" is="emby-checkbox" class="chkExternalVideoPlayer"/> <span>${EnableExternalVideoPlayers}</span> </label> <div class="fieldDescription checkboxFieldDescription"> <div class="labelNativeExternalPlayers">${EnableExternalVideoPlayersHelp}</div> </div> </div> <div class="selectContainer"> <select is="emby-select" class="selectChromecastVersion" label="${LabelChromecastVersion}"> <option value="stable">${LabelStable}</option> <option value="unstable">${LabelUnstable}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipForwardLength" label="${LabelSkipForwardLength}"></select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipBackLength" label="${LabelSkipBackLength}"></select> </div> </div> <button is="emby-button" type="submit" class="raised button-submit block btnSave hide"> <span>${Save}</span> </button> </form> ',"core"),e.element.querySelector("form").addEventListener("submit",f.bind(t)),e.enableSaveButton&&e.element.querySelector(".btnSave").classList.remove("hide"),e.element.querySelector(".selectLabelMaxVideoWidth").addEventListener("change",k.bind(t)),t.loadData(),e.autoFocus&&l.Z.autoFocus(e.element)}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,x(t,this)}var t,i;return t=e,i=[{key:"loadData",value:function(){var e=this,t=e.options.element;r.ZP.show();var i=e.options.userId,l=u.Z.getApiClient(e.options.serverId),n=e.options.userSettings;l.getUser(i).then((function(s){n.setUserInfo(i,l).then((function(){e.dataLoaded=!0,function(e,t,i,l){var n=l.getCurrentUserId(),s=t.Id;!function(e,t,i){if(t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".videoQualitySection").classList.remove("hide"):e.querySelector(".videoQualitySection").classList.add("hide"),o.M.supports("multiserver"))return e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),void(t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"));i.getEndpointInfo().then((function(i){i.IsInNetwork?(e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.add("hide"),e.querySelector(".musicQualitySection").classList.add("hide")):(e.querySelector(".fldVideoInNetworkQuality").classList.add("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"))}))}(e,t,l),e.querySelector("#selectAllowedAudioChannels").value=i.allowedAudioChannels(),l.getCultures().then((function(i){!function(e,t){var i="";i+="<option value=''>".concat(c.ZP.translate("AnyLanguage"),"</option>");for(var a=0,o=t.length;a<o;a++){var l=t[a];i+="<option value='".concat(l.ThreeLetterISOLanguageName,"'>").concat(l.DisplayName,"</option>")}e.innerHTML=i}(e.querySelector("#selectAudioLanguage"),i),e.querySelector("#selectAudioLanguage",e).value=t.Configuration.AudioLanguagePreference||"",e.querySelector(".chkEpisodeAutoPlay").checked=t.Configuration.EnableNextEpisodeAutoPlay||!1})),o.M.supports("externalplayerintent")&&s===n?e.querySelector(".fldExternalPlayer").classList.remove("hide"):e.querySelector(".fldExternalPlayer").classList.add("hide"),s===n&&(t.Policy.EnableVideoPlaybackTranscoding||t.Policy.EnableAudioPlaybackTranscoding)?(e.querySelector(".qualitySections").classList.remove("hide"),o.M.supports("chromecast")&&t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".fldChromecastQuality").classList.remove("hide"):e.querySelector(".fldChromecastQuality").classList.add("hide")):(e.querySelector(".qualitySections").classList.add("hide"),e.querySelector(".fldChromecastQuality").classList.add("hide")),e.querySelector(".chkPlayDefaultAudioTrack").checked=t.Configuration.PlayDefaultAudioTrack||!1,e.querySelector(".chkPreferFmp4HlsContainer").checked=i.preferFmp4HlsContainer(),e.querySelector(".chkEnableCinemaMode").checked=i.enableCinemaMode(),e.querySelector(".chkEnableNextVideoOverlay").checked=i.enableNextVideoInfoOverlay(),e.querySelector(".chkRememberAudioSelections").checked=t.Configuration.RememberAudioSelections||!1,e.querySelector(".chkRememberSubtitleSelections").checked=t.Configuration.RememberSubtitleSelections||!1,e.querySelector(".chkExternalVideoPlayer").checked=a.Z.enableSystemExternalPlayers(),m(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),m(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),m(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),y(e.querySelector(".selectChromecastVideoQuality")),e.querySelector(".selectChromecastVersion").value=i.chromecastVersion(),e.querySelector(".selectLabelMaxVideoWidth").value=a.Z.maxVideoWidth();var u=e.querySelector(".selectSkipForwardLength");h(u),u.value=i.skipForwardLength();var d=e.querySelector(".selectSkipBackLength");h(d),d.value=i.skipBackLength(),r.ZP.hide()}(t,s,n,l)}))}))}},{key:"submit",value:function(){f.call(this)}},{key:"destroy",value:function(){this.options=null}}],i&&b(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C=g,A=i(28978),L=i(6610),q=(i(664),A.UserSettings);function V(e,t){var i,a=t.userId||ApiClient.getCurrentUserId(),o=a===ApiClient.getCurrentUserId()?A:new q;e.addEventListener("viewshow",(function(){i?i.loadData():i=new C({serverId:ApiClient.serverId(),userId:a,element:e.querySelector(".settingsContainer"),userSettings:o,enableSaveButton:!0,enableSaveConfirmation:!0,autoFocus:L.default.isEnabled()})})),e.addEventListener("viewdestroy",(function(){i&&(i.destroy(),i=null)}))}}}]);